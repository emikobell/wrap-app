{% extends 'base.html' %}

{% block title %}Wrap{% endblock %}

{% block body %}
    <div id="all-top-tracks">
        <div id="top-track">
            <h3>Your top song:</h3>
            <div id="top-track-image">
                <img src="{{ tracks[0]['img'] }}" alt="Image of album cover" />
            </div>
            <div id="top-track-name">
                <a href="{{ tracks[0]['url'] }}" target="_blank">{{ tracks[0]['name'] }}</a>
            </div>
            <div id="top-track-artists">
            {% for artist in tracks[0]['artists'] %}
                <a href="{{ artist['url'] }}" target="_blank">{{ artist['name'] }}</a> <br />
            {% endfor %}
            </div>
        </div>
        <div id="top-tracks-list">
            <h3>Your top songs:</h3>
            <table id="top-tracks-table">
        {% for track in tracks %}
            <tr>
                <td id="track-{{ track['rank'] }}-rank">{{ track['rank'] }}</td>
                <td id="track-{{ track['rank'] }}-img"><img src="{{ track['img'] }}" alt="Image of album cover" /></td>
                <td id="track-{{ track['rank'] }}-name"><a href="{{ track['url'] }}" target="_blank">{{ track['name'] }}</a>
                    <div>
                    {% for artist in track['artists'] %}
                        {% if loop.revindex == 1 and track['artists']|length > 1 %}
                             & 
                        {% elif track['artists']|length != 1 and loop.index0 != 0%}
                            , 
                        {% endif %}
                        <a href="{{ artist['url'] }}" target="_blank">{{ artist['name'] }}</a>
                    {% endfor %}
                    </div>
                </td>
            </tr>
        {% endfor %}
            </table>
        </div>
    </div>
    <div id="all-top-artists">
        <div id="top-artist">
            <h3>Your top artist:</h3>
            <div id="top-artist-image">
                <img src="{{ artists[0]['img'] }}" alt="Image of artist, {{ artists[0]['name'] }}" />
            </div>
            <div id="top-artist-name">
                <a href="{{ artists[0]['url'] }}" target="_blank">{{ artists[0]['name'] }}</a>
            </div>
        </div>
        <div id="top-artist-list">
            <h3>Your top artists:</h3>
            <table id="top-tracks-table">
            {% for artist in artists %}
                <tr>
                    <td id="artist-{{ artist['rank'] }}-rank">{{ artist['rank'] }}</td>
                    <td id="artist-{{ artist['rank'] }}-img"><img src="{{ artist['img'] }}" alt="Image of artist, {{ artist['name'] }}" /></td>
                    <td id="artist-{{ artist['rank'] }}-name"><a href="{{ artist['url'] }}" target="_blank">{{ artist['name'] }}</a></td>
                </tr>
            {% endfor %}
            </table>
        </div>
    </div>
    <div id="all-top-genres">
        <div id="top-genre">
            <h3>Your top genre:</h3>
            {{ genres[0]['name'] }}
        </div>
        <div id="top-genre-list">
            <h3>Your top genres:</h3>
            <ul>
            {% for genre in genres %}
            <li>{{ genre['name'] }}: {{ genre['freq'] }}</li>
            {% endfor %}
            </ul>
        </div>
    </div>
{% endblock %}